
// Do not modify
// Generated from "./scripts/update-site/build-pages"

import PrimitivePageMain from "~/components/Primitives/PrimitivePageMain";
import CopyPackages from "~/components/CopyPackage/CopyPackages";

/*@jsxRuntime automatic @jsxImportSource solid-js*/
import {useMDXComponents as _provideComponents} from "solid-mdx";
function _createMdxContent(props) {
  const _components = Object.assign({
    p: "p",
    ul: "ul",
    li: "li",
    a: "a",
    code: "code",
    h2: "h2",
    h3: "h3",
    pre: "pre",
    span: "span",
    h4: "h4",
    strong: "strong"
  }, _provideComponents(), props.components);
  if (!CopyPackages) _missingMdxReference("CopyPackages", true);
  return <><_components.p>{"A collection of SolidJS primitives providing various features of a pubsub/event-emitter/event-bus:"}</_components.p>{"\n"}<_components.ul>{"\n"}<_components.li><_components.a href="#createSimpleEmitter"><_components.code>{"createSimpleEmitter"}</_components.code></_components.a>{" - Very minimal interface for emiting and receiving events. Good for parent-child component communication."}</_components.li>{"\n"}<_components.li><_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{" - Provides all the base functions of an event-emitter, plus additional functions for managing listeners, it's behavior could be customized with an config object. Good for advanced usage."}</_components.li>{"\n"}<_components.li><_components.a href="#createEventBus"><_components.code>{"createEventBus"}</_components.code></_components.a>{" - Extends "}<_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{". Additionally it provides a signal accessor function with last event's value."}</_components.li>{"\n"}<_components.li><_components.a href="#createEventStack"><_components.code>{"createEventStack"}</_components.code></_components.a>{" - Extends "}<_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{". Provides the emitted events in a list/history form, with tools to manage it."}</_components.li>{"\n"}<_components.li><_components.a href="#createEventHub"><_components.code>{"createEventHub"}</_components.code></_components.a>{" - Provides helpers for using a group of emitters."}</_components.li>{"\n"}</_components.ul>{"\n"}<_components.h2 id="installation"><_components.a className="header-anchor" href="#installation">{"#"}</_components.a>{"Installation"}</_components.h2>{"\n"}<CopyPackages packageName="@solid-primitives/event-bus" />{"\n"}<_components.h2 id="createsimpleemitter"><_components.a className="header-anchor" href="#createsimpleemitter">{"#"}</_components.a><_components.code>{"createSimpleEmitter"}</_components.code></_components.h2>{"\n"}<_components.p>{"Very minimal interface for emiting and receiving events. Good for parent-child component communication."}</_components.p>{"\n"}<_components.h3 id="how-to-use-it"><_components.a className="header-anchor" href="#how-to-use-it">{"#"}</_components.a>{"How to use it"}</_components.h3>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { createSimpleEmitter } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-comment">{"// accepts up-to-3 genetic payload types"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" [listen, emit, clear] = createSimpleEmitter<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", "}<_components.span className="hljs-built_in">{"number"}</_components.span>{", "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{">();\n\n"}<_components.span className="hljs-comment">{"// can be used without payload type, if you don't want to send any"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"createSimpleEmitter"}</_components.span>{"();\n\n"}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"("}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"a, b, c"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(a, b, c));\n\n"}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{", "}<_components.span className="hljs-number">{"123"}</_components.span>{", "}<_components.span className="hljs-literal">{"true"}</_components.span>{");\n\n"}<_components.span className="hljs-comment">{"// clear all listeners"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"clear"}</_components.span>{"();\n"}<_components.span className="hljs-comment">{"// listeners will also be cleared onCleanup automatically"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h3 id="types"><_components.a className="header-anchor" href="#types">{"#"}</_components.a>{"Types"}</_components.h3>{"\n"}<_components.p>{"Check out "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/types.ts">{"shared types"}</_components.a>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"function"}</_components.span>{" createSimpleEmitter<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{">(): [\n  "}<_components.span className="hljs-attr">{"listen"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericListen"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>,\n  "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericEmit"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>,\n  "}<_components.span className="hljs-attr">{"clear"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{"\n];\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="createemitter"><_components.a className="header-anchor" href="#createemitter">{"#"}</_components.a><_components.code>{"createEmitter"}</_components.code></_components.h2>{"\n"}<_components.p>{"Provides all the base functions of an event-emitter, plus additional functions for managing listeners, it's behavior could be customized with an config object. Good for advanced usage."}</_components.p>{"\n"}<_components.h3 id="how-to-use-it-1"><_components.a className="header-anchor" href="#how-to-use-it-1">{"#"}</_components.a>{"How to use it"}</_components.h3>{"\n"}<_components.h4 id="creating-emitter"><_components.a className="header-anchor" href="#creating-emitter">{"#"}</_components.a>{"Creating Emitter"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { createEmitter } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-comment">{"// accepts up-to-3 genetic payload types"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" emitter = createEmitter<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", "}<_components.span className="hljs-built_in">{"number"}</_components.span>{", "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{">();\n\n"}<_components.span className="hljs-comment">{"// can be used without payload type, if you don't want to send any"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"createEmitter"}</_components.span>{"();\n\n"}<_components.span className="hljs-comment">{"// emitter can be destructured:"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, emit, has, clear } = emitter;\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="emiting--listening-to-events"><_components.a className="header-anchor" href="#emiting--listening-to-events">{"#"}</_components.a>{"Emiting & Listening to events"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"const"}</_components.span>{" "}<_components.span className="hljs-title function_">{"listener"}</_components.span>{" = ("}<_components.span className="hljs-params">{"a, b, c"}</_components.span>{") => "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(a, b, c);\nemitter."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener);\n\nemitter."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{", "}<_components.span className="hljs-number">{"123"}</_components.span>{", "}<_components.span className="hljs-literal">{"true"}</_components.span>{");\n\nemitter."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nemitter."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// false"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// pass true as a second argument to protect the listener"}</_components.span>{"\nemitter."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener, "}<_components.span className="hljs-literal">{"true"}</_components.span>{");\nemitter."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nemitter."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// true"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// clear all listeners"}</_components.span>{"\nemitter."}<_components.span className="hljs-title function_">{"clear"}</_components.span>{"();\n"}<_components.span className="hljs-comment">{"// listeners will also be cleared onCleanup automatically"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="emitter-config"><_components.a className="header-anchor" href="#emitter-config">{"#"}</_components.a>{"Emitter Config"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, has, remove, emit } = createEmitter<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">({\n  "}<_components.span className="hljs-attr">{"beforeEmit"}</_components.span>{": "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"event"}</_components.span>{" =>"}</_components.span>{" {...},\n  "}<_components.span className="hljs-attr">{"emitGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"emit, payload"}</_components.span>{") =>"}</_components.span>{" allowedEmit && "}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"(), "}<_components.span className="hljs-comment">{"// emit('foo') to emit different value"}</_components.span>{"\n  "}<_components.span className="hljs-attr">{"removeGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"remove, listener"}</_components.span>{") =>"}</_components.span>{" allowedRemove && "}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"()\n});\n"}</_components.code></_components.pre>{"\n"}<_components.p>{"See "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/test/emitter.test.ts">{"the tests"}</_components.a>{" for better usage reference."}</_components.p>{"\n"}<_components.h3 id="types-1"><_components.a className="header-anchor" href="#types-1">{"#"}</_components.a>{"Types"}</_components.h3>{"\n"}<_components.p>{"Check out "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/types.ts">{"shared types"}</_components.a>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"function"}</_components.span>{" createEmitter<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{">(\n  "}<_components.span className="hljs-attr">{"config"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"> = {}\n): "}<_components.span className="hljs-title class_">{"Emitter"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{">;\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"Emitter"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{"> = {\n  "}<_components.span className="hljs-attr">{"listen"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericListenProtect"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>;\n  "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericEmit"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>;\n  "}<_components.span className="hljs-attr">{"remove"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Remove"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{">;\n  "}<_components.span className="hljs-attr">{"clear"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"has"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"listener: GenericListener<[A0, A1, A2]>"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{";\n};\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{" = "}<_components.span className="hljs-built_in">{"void"}</_components.span>{"> = {\n  emitGuard?: "}<_components.span className="hljs-title class_">{"EmitGuard"}</_components.span>{"<"}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{">;\n  removeGuard?: "}<_components.span className="hljs-title class_">{"RemoveGuard"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"GenericListener"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>>;\n  beforeEmit?: "}<_components.span className="hljs-title class_">{"GenericListener"}</_components.span>{"<["}<_components.span className="hljs-variable constant_">{"A0"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A1"}</_components.span>{", "}<_components.span className="hljs-variable constant_">{"A2"}</_components.span>{"]>;\n};\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="createeventbus"><_components.a className="header-anchor" href="#createeventbus">{"#"}</_components.a><_components.code>{"createEventBus"}</_components.code></_components.h2>{"\n"}<_components.p>{"Extends "}<_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{". Additionally it provides a signal accessor function with last event's value."}</_components.p>{"\n"}<_components.h3 id="how-to-use-it-2"><_components.a className="header-anchor" href="#how-to-use-it-2">{"#"}</_components.a>{"How to use it"}</_components.h3>{"\n"}<_components.h4 id="creating-eventbus"><_components.a className="header-anchor" href="#creating-eventbus">{"#"}</_components.a>{"Creating EventBus"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { createEventBus } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" bus = createEventBus<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">();\n\n"}<_components.span className="hljs-comment">{"// can be destructured:"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, emit, has, clear, value } = bus;\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="emitting--listening-to-events"><_components.a className="header-anchor" href="#emitting--listening-to-events">{"#"}</_components.a>{"Emitting & listening to events"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"const"}</_components.span>{" "}<_components.span className="hljs-title function_">{"listener"}</_components.span>{" = ("}<_components.span className="hljs-params">{"event, previous"}</_components.span>{") => "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(event, previous);\nbus."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener);\n\nbus."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{");\n\nbus."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nbus."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// false"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// pass true as a second argument to protect the listener"}</_components.span>{"\nbus."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener, "}<_components.span className="hljs-literal">{"true"}</_components.span>{");\nbus."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nbus."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// true"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// clear all listeners"}</_components.span>{"\nbus."}<_components.span className="hljs-title function_">{"clear"}</_components.span>{"();\n"}<_components.span className="hljs-comment">{"// listeners will also be cleared onCleanup automatically"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="last-value-signal"><_components.a className="header-anchor" href="#last-value-signal">{"#"}</_components.a>{"Last Value signal"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-comment">{"// last event is be available as a signal"}</_components.span>{"\nbus."}<_components.span className="hljs-title function_">{"value"}</_components.span>{"(); "}<_components.span className="hljs-comment">{"// => string | undefined"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// pass initial value to config to remove \"undefined\" from the type"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"createEventBus"}</_components.span>{"({\n  "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-string">{"\"initial\""}</_components.span>{"\n});\n\nbus."}<_components.span className="hljs-title function_">{"value"}</_components.span>{"(); "}<_components.span className="hljs-comment">{"// => string"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="eventbus-config"><_components.a className="header-anchor" href="#eventbus-config">{"#"}</_components.a>{"EventBus Config"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts">{"createEventBus<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">({\n  "}<_components.span className="hljs-attr">{"beforeEmit"}</_components.span>{": "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"event"}</_components.span>{" =>"}</_components.span>{" "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(event),\n  "}<_components.span className="hljs-attr">{"emitGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"emit, event, prev"}</_components.span>{") =>"}</_components.span>{" allowedEmit && "}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"(), "}<_components.span className="hljs-comment">{"// emit('foo') to emit different value,"}</_components.span>{"\n  "}<_components.span className="hljs-attr">{"removeGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"remove, listener"}</_components.span>{") =>"}</_components.span>{" allowedRemove && "}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(),\n  "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-string">{"\"Initial Value\""}</_components.span>{"\n});\n"}</_components.code></_components.pre>{"\n"}<_components.p>{"See "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/test/eventBus.test.ts">{"the tests"}</_components.a>{" for better usage reference."}</_components.p>{"\n"}<_components.h3 id="types-2"><_components.a className="header-anchor" href="#types-2">{"#"}</_components.a>{"Types"}</_components.h3>{"\n"}<_components.p>{"Check out "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/types.ts">{"shared types"}</_components.a>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-comment">{"// Initial value was NOT provided"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"function"}</_components.span>{" createEventBus<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{">(\n  config?: "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{">\n): "}<_components.span className="hljs-title class_">{"EventBus"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{">;\n"}<_components.span className="hljs-comment">{"// Initial value was provided"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"function"}</_components.span>{" createEventBus<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{">(\n  "}<_components.span className="hljs-attr">{"config"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{"> & {\n    "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{";\n  }\n): "}<_components.span className="hljs-title class_">{"EventBus"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{">;\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventBusListener"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V = "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{"> = "}<_components.span className="hljs-title class_">{"GenericListener"}</_components.span>{"<["}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V]>;\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventBusListen"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V = "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{"> = "}<_components.span className="hljs-title class_">{"ListenProtect"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V>;\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventBusRemove"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V = "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{"> = "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"\n  listener: EventBusListener<Event, V>\n"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventBus"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V = "}<_components.span className="hljs-title class_">{"Event"}</_components.span>{" | "}<_components.span className="hljs-literal">{"undefined"}</_components.span>{"> = {\n  "}<_components.span className="hljs-attr">{"remove"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventBusRemove"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V>;\n  "}<_components.span className="hljs-attr">{"listen"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventBusListen"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"Event"}</_components.span>{", V>;\n  "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericEmit"}</_components.span>{"<["}<_components.span className="hljs-title class_">{"Event"}</_components.span>{"]>;\n  "}<_components.span className="hljs-attr">{"clear"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"has"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"listener: EventBusListener<Event, V>"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Accessor"}</_components.span>{"<V>;\n};\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="createeventstack"><_components.a className="header-anchor" href="#createeventstack">{"#"}</_components.a><_components.code>{"createEventStack"}</_components.code></_components.h2>{"\n"}<_components.p>{"Extends "}<_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{". Provides the emitted events in a list/history form, with tools to manage it."}</_components.p>{"\n"}<_components.h3 id="how-to-use-it-3"><_components.a className="header-anchor" href="#how-to-use-it-3">{"#"}</_components.a>{"How to use it"}</_components.h3>{"\n"}<_components.h4 id="creating-the-event-bus"><_components.a className="header-anchor" href="#creating-the-event-bus">{"#"}</_components.a>{"Creating the event bus"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { createEventStack } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-comment">{"// 1. event type has to be an object"}</_components.span>{"\n"}<_components.span className="hljs-comment">{"// be what you emit will be added to the value stack"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" bus = createEventStack<{ "}<_components.span className="hljs-attr">{"message"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }>();\n\n"}<_components.span className="hljs-comment">{"// 2. provide event type, value type, and toValue parsing function"}</_components.span>{"\n"}<_components.span className="hljs-comment">{"// value type has to be an object"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" bus = createEventStack<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", { "}<_components.span className="hljs-attr">{"text"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }>({\n  "}<_components.span className="hljs-attr">{"toValue"}</_components.span>{": "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" ({ "}<_components.span className="hljs-attr">{"text"}</_components.span>{": e })\n});\n\n"}<_components.span className="hljs-comment">{"// can be destructured:"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, emit, has, clear, value } = bus;\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="listening--emitting"><_components.a className="header-anchor" href="#listening--emitting">{"#"}</_components.a>{"Listening & Emitting"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"const"}</_components.span>{" "}<_components.span className="hljs-attr">{"listener"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventStackListener"}</_components.span>{"<{ "}<_components.span className="hljs-attr">{"text"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }> = "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"event, stack, removeValue"}</_components.span>{") =>"}</_components.span>{" {\n  "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(event, stack);\n  "}<_components.span className="hljs-comment">{"// you can remove the value from stack"}</_components.span>{"\n  "}<_components.span className="hljs-title function_">{"removeValue"}</_components.span>{"();\n};\nbus."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener);\n\nbus."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{");\n\nbus."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nbus."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// false"}</_components.span>{"\n\n"}<_components.span className="hljs-comment">{"// pass true as a second argument to protect the listener"}</_components.span>{"\nbus."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"(listener, "}<_components.span className="hljs-literal">{"true"}</_components.span>{");\nbus."}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(listener);\nbus."}<_components.span className="hljs-title function_">{"has"}</_components.span>{"(listener); "}<_components.span className="hljs-comment">{"// true"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="event-stack"><_components.a className="header-anchor" href="#event-stack">{"#"}</_components.a>{"Event Stack"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-comment">{"// a signal accessor:"}</_components.span>{"\nbus."}<_components.span className="hljs-title function_">{"stack"}</_components.span>{"() "}<_components.span className="hljs-comment">{"// => { text: string }[]"}</_components.span>{"\n\nbus."}<_components.span className="hljs-title function_">{"removeFromStack"}</_components.span>{"(value) "}<_components.span className="hljs-comment">{"// pass a reference to the value"}</_components.span>{"\n\nbus."}<_components.span className="hljs-title function_">{"setStack"}</_components.span>{"("}<_components.span className="hljs-function"><_components.span className="hljs-params">{"stack"}</_components.span>{" =>"}</_components.span>{" stack."}<_components.span className="hljs-title function_">{"filter"}</_components.span>{"("}<_components.span className="hljs-function"><_components.span className="hljs-params">{"item"}</_components.span>{" =>"}</_components.span>{" {...}))\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="createeventstack-config"><_components.a className="header-anchor" href="#createeventstack-config">{"#"}</_components.a>{"createEventStack Config"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts">{"createEventStack<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", { "}<_components.span className="hljs-attr">{"text"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }>({\n  "}<_components.span className="hljs-attr">{"beforeEmit"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"value, stack, remove"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(value, stack),\n  "}<_components.span className="hljs-attr">{"emitGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"emit, text"}</_components.span>{") =>"}</_components.span>{" allowEmit && "}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"(), "}<_components.span className="hljs-comment">{"// emit('foo') to emit different value"}</_components.span>{"\n  "}<_components.span className="hljs-attr">{"removeGuard"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"remove, listener"}</_components.span>{") =>"}</_components.span>{" allowRemove && "}<_components.span className="hljs-title function_">{"remove"}</_components.span>{"(),\n  "}<_components.span className="hljs-attr">{"toValue"}</_components.span>{": "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" ({ "}<_components.span className="hljs-attr">{"text"}</_components.span>{": e })\n});\n"}</_components.code></_components.pre>{"\n"}<_components.h3 id="types-3"><_components.a className="header-anchor" href="#types-3">{"#"}</_components.a>{"Types"}</_components.h3>{"\n"}<_components.p>{"Check out "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/types.ts">{"shared types"}</_components.a>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-comment">{"// Overload 0: \"toValue\" was not passed"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"function"}</_components.span>{" createEventStack<E "}<_components.span className="hljs-keyword">{"extends"}</_components.span>{" "}<_components.span className="hljs-built_in">{"object"}</_components.span>{">(config?: "}<_components.span className="hljs-title class_">{"Config"}</_components.span>{"<E, E>): "}<_components.span className="hljs-title class_">{"EventStack"}</_components.span>{"<E, E>;\n"}<_components.span className="hljs-comment">{"// Overload 1: \"toValue\" was set"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"function"}</_components.span>{" createEventStack<E, V "}<_components.span className="hljs-keyword">{"extends"}</_components.span>{" "}<_components.span className="hljs-built_in">{"object"}</_components.span>{">(\n  "}<_components.span className="hljs-attr">{"config"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Config"}</_components.span>{"<E, V> & {\n    "}<_components.span className="hljs-attr">{"toValue"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"event: E, stack: V[]"}</_components.span>{") =>"}</_components.span>{" V;\n  }\n): "}<_components.span className="hljs-title class_">{"EventStack"}</_components.span>{"<E, V>;\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventStackListener"}</_components.span>{"<V> = "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"event: V, stack: V[], removeFromStack: Fn"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"void"}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventStack"}</_components.span>{"<E, V = E> = "}<_components.span className="hljs-title class_">{"Modify"}</_components.span>{"<\n  "}<_components.span className="hljs-title class_">{"Emitter"}</_components.span>{"<V, V[], "}<_components.span className="hljs-title class_">{"Fn"}</_components.span>{">,\n  {\n    "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Accessor"}</_components.span>{"<V[]>;\n    "}<_components.span className="hljs-attr">{"stack"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Accessor"}</_components.span>{"<V[]>;\n    "}<_components.span className="hljs-attr">{"setStack"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Setter"}</_components.span>{"<V[]>;\n    "}<_components.span className="hljs-attr">{"removeFromStack"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"value: V"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{";\n    "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-title class_">{"GenericEmit"}</_components.span>{"<[E]>;\n  }\n>;\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"Config"}</_components.span>{"<E, V> = {\n  length?: "}<_components.span className="hljs-built_in">{"number"}</_components.span>{";\n  emitGuard?: "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<E>["}<_components.span className="hljs-string">{"\"emitGuard\""}</_components.span>{"];\n  removeGuard?: "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<V, V[], "}<_components.span className="hljs-title class_">{"Fn"}</_components.span>{">["}<_components.span className="hljs-string">{"\"removeGuard\""}</_components.span>{"];\n  beforeEmit?: "}<_components.span className="hljs-title class_">{"EmitterConfig"}</_components.span>{"<V, V[], "}<_components.span className="hljs-title class_">{"Fn"}</_components.span>{">["}<_components.span className="hljs-string">{"\"beforeEmit\""}</_components.span>{"];\n};\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="createeventhub"><_components.a className="header-anchor" href="#createeventhub">{"#"}</_components.a><_components.code>{"createEventHub"}</_components.code></_components.h2>{"\n"}<_components.p>{"Provides helpers for using a group of emitters."}</_components.p>{"\n"}<_components.p>{"Can be used with "}<_components.a href="#createEmitter"><_components.code>{"createEmitter"}</_components.code></_components.a>{", "}<_components.a href="#createEventBus"><_components.code>{"createEventBus"}</_components.code></_components.a>{", "}<_components.a href="#createEventStack"><_components.code>{"createEventStack"}</_components.code></_components.a>{"."}</_components.p>{"\n"}<_components.h3 id="how-to-use-it-4"><_components.a className="header-anchor" href="#how-to-use-it-4">{"#"}</_components.a>{"How to use it"}</_components.h3>{"\n"}<_components.h4 id="creating-eventhub"><_components.a className="header-anchor" href="#creating-eventhub">{"#"}</_components.a>{"Creating EventHub"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { createEventHub } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-comment">{"// by passing an record of Channels"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" hub = "}<_components.span className="hljs-title function_">{"createEventHub"}</_components.span>{"({\n  "}<_components.span className="hljs-attr">{"busA"}</_components.span>{": createEmitter<"}<_components.span className="hljs-built_in">{"void"}</_components.span>{">(),\n  "}<_components.span className="hljs-attr">{"busB"}</_components.span>{": createEventBus<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">(),\n  "}<_components.span className="hljs-attr">{"busC"}</_components.span>{": createEventStack<{ "}<_components.span className="hljs-attr">{"text"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }>()\n});\n\n"}<_components.span className="hljs-comment">{"// by passing a function"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" hub = "}<_components.span className="hljs-title function_">{"createEventHub"}</_components.span>{"("}<_components.span className="hljs-function"><_components.span className="hljs-params">{"bus"}</_components.span>{" =>"}</_components.span>{" ({\n  "}<_components.span className="hljs-attr">{"busA"}</_components.span>{": bus<"}<_components.span className="hljs-built_in">{"number"}</_components.span>{">(),\n  "}<_components.span className="hljs-attr">{"busB"}</_components.span>{": bus<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">(),\n  "}<_components.span className="hljs-attr">{"busC"}</_components.span>{": createEventStack<{ "}<_components.span className="hljs-attr">{"text"}</_components.span>{": "}<_components.span className="hljs-built_in">{"string"}</_components.span>{" }>()\n}));\n\n"}<_components.span className="hljs-comment">{"// hub can be destructured"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { busA, busB, on, off, listen, emit, clear } = hub;\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="listening--emitting-1"><_components.a className="header-anchor" href="#listening--emitting-1">{"#"}</_components.a>{"Listening & Emitting"}</_components.h4>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-comment">{"// using hub methods:"}</_components.span>{"\nhub."}<_components.span className="hljs-title function_">{"on"}</_components.span>{"("}<_components.span className="hljs-string">{"\"busA\""}</_components.span>{", "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" {});\nhub."}<_components.span className="hljs-title function_">{"on"}</_components.span>{"("}<_components.span className="hljs-string">{"\"busB\""}</_components.span>{", "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" {});\n\nhub."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"busA\""}</_components.span>{", "}<_components.span className="hljs-number">{"0"}</_components.span>{");\nhub."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"busB\""}</_components.span>{", "}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{");\n\n"}<_components.span className="hljs-comment">{"// using emitters"}</_components.span>{"\nhub."}<_components.span className="hljs-property">{"busA"}</_components.span>{"."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"("}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" {});\nhub."}<_components.span className="hljs-property">{"busA"}</_components.span>{"."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-number">{"1"}</_components.span>{");\n\nhub."}<_components.span className="hljs-property">{"busB"}</_components.span>{"."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"("}<_components.span className="hljs-function"><_components.span className="hljs-params">{"e"}</_components.span>{" =>"}</_components.span>{" {});\nhub."}<_components.span className="hljs-property">{"busB"}</_components.span>{"."}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"bar\""}</_components.span>{");\n\n"}<_components.span className="hljs-comment">{"// global listener - listens to all channels"}</_components.span>{"\nhub."}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"("}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"name, e"}</_components.span>{") =>"}</_components.span>{" {});\n"}</_components.code></_components.pre>{"\n"}<_components.h4 id="accessing-values"><_components.a className="header-anchor" href="#accessing-values">{"#"}</_components.a>{"Accessing values"}</_components.h4>{"\n"}<_components.p>{"If a emitter returns an accessor value, it will be available in a "}<_components.code>{".store"}</_components.code>{" store."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts">{"hub."}<_components.span className="hljs-property">{"store"}</_components.span>{"."}<_components.span className="hljs-property">{"myBus"}</_components.span>{";\n"}<_components.span className="hljs-comment">{"// same as"}</_components.span>{"\nhub."}<_components.span className="hljs-property">{"myBus"}</_components.span>{"."}<_components.span className="hljs-title function_">{"value"}</_components.span>{"();\n"}</_components.code></_components.pre>{"\n"}<_components.h3 id="types-4"><_components.a className="header-anchor" href="#types-4">{"#"}</_components.a>{"Types"}</_components.h3>{"\n"}<_components.p>{"Check out "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/types.ts">{"shared types"}</_components.a>{" and "}<_components.a href="https://github.com/solidjs-community/solid-primitives/blob/main/packages/event-bus/src/eventHub.ts">{"createEventHub source"}</_components.a>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"function"}</_components.span>{" createEventHub<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{" "}<_components.span className="hljs-keyword">{"extends"}</_components.span>{" "}<_components.span className="hljs-title class_">{"Record"}</_components.span>{"<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", "}<_components.span className="hljs-title class_">{"EventHubChannel"}</_components.span>{">>(\n  "}<_components.span className="hljs-attr">{"defineChannels"}</_components.span>{": ("}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"bus: "}<_components.span className="hljs-keyword">{"typeof"}</_components.span>{" createEventBus"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{") | "}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{"\n): "}<_components.span className="hljs-title class_">{"EventHub"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{">;\n"}<_components.span className="hljs-comment">{"/**\n * Required interface of a Emitter/EventBus, to be able to be used as a channel in the EventHub\n */"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"interface"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventHubChannel"}</_components.span>{" {\n  "}<_components.span className="hljs-attr">{"remove"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"fn: (...payload: "}<_components.span className="hljs-built_in">{"any"}</_components.span>{"[]) => "}<_components.span className="hljs-built_in">{"void"}</_components.span></_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"boolean"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"listen"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"listener: (...payload: "}<_components.span className="hljs-built_in">{"any"}</_components.span>{"[]) => "}<_components.span className="hljs-built_in">{"void"}</_components.span>{", protect?: "}<_components.span className="hljs-built_in">{"boolean"}</_components.span></_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"...payload: "}<_components.span className="hljs-built_in">{"any"}</_components.span>{"[]"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"void"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"clear"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"value"}</_components.span>{": "}<_components.span className="hljs-title class_">{"Accessor"}</_components.span>{"<"}<_components.span className="hljs-built_in">{"any"}</_components.span>{">;\n}\n"}<_components.span className="hljs-keyword">{"type"}</_components.span>{" "}<_components.span className="hljs-title class_">{"EventHub"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{" "}<_components.span className="hljs-keyword">{"extends"}</_components.span>{" "}<_components.span className="hljs-title class_">{"Record"}</_components.span>{"<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{", "}<_components.span className="hljs-title class_">{"EventHubChannel"}</_components.span>{">> = "}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{" & {\n  "}<_components.span className="hljs-attr">{"on"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventHubOn"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{">;\n  "}<_components.span className="hljs-attr">{"off"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventHubOff"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{">;\n  "}<_components.span className="hljs-attr">{"emit"}</_components.span>{": "}<_components.span className="hljs-title class_">{"EventHubEmit"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{">;\n  "}<_components.span className="hljs-attr">{"clear"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"event: keyof ChannelMap"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"void"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"clearAll"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"listen"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"listener: EventHubListener<ChannelMap>, protect?: "}<_components.span className="hljs-built_in">{"boolean"}</_components.span></_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"remove"}</_components.span>{": "}<_components.span className="hljs-function">{"("}<_components.span className="hljs-params">{"listener: EventHubListener<ChannelMap>"}</_components.span>{") =>"}</_components.span>{" "}<_components.span className="hljs-built_in">{"void"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"clearGlobal"}</_components.span>{": "}<_components.span className="hljs-title class_">{"VoidFunction"}</_components.span>{";\n  "}<_components.span className="hljs-attr">{"store"}</_components.span>{": "}<_components.span className="hljs-title class_">{"ValueMap"}</_components.span>{"<"}<_components.span className="hljs-title class_">{"ChannelMap"}</_components.span>{">;\n};\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="eventbus-utils"><_components.a className="header-anchor" href="#eventbus-utils">{"#"}</_components.a>{"EventBus Utils"}</_components.h2>{"\n"}<_components.h3 id="topromise"><_components.a className="header-anchor" href="#topromise">{"#"}</_components.a><_components.code>{"toPromise"}</_components.code></_components.h3>{"\n"}<_components.p>{"Turns a stream-like listen function, into a promise resolving when the first event is captured."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { toPromise } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" emitter = createEmitter<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">();\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" event = "}<_components.span className="hljs-keyword">{"await"}</_components.span>{" "}<_components.span className="hljs-title function_">{"toPromise"}</_components.span>{"(emitter."}<_components.span className="hljs-property">{"listen"}</_components.span>{");\n\n"}<_components.span className="hljs-comment">{"// can be used together with raceTimeout from @solid-primitives/utils"}</_components.span>{"\n"}<_components.span className="hljs-keyword">{"import"}</_components.span>{" { raceTimeout } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/utils\""}</_components.span>{";\n"}<_components.span className="hljs-keyword">{"try"}</_components.span>{" {\n  "}<_components.span className="hljs-keyword">{"const"}</_components.span>{" event = "}<_components.span className="hljs-keyword">{"await"}</_components.span>{" "}<_components.span className="hljs-title function_">{"raceTimeout"}</_components.span>{"("}<_components.span className="hljs-title function_">{"toPromise"}</_components.span>{"(emitter."}<_components.span className="hljs-property">{"listen"}</_components.span>{"), "}<_components.span className="hljs-number">{"2000"}</_components.span>{", "}<_components.span className="hljs-literal">{"true"}</_components.span>{", "}<_components.span className="hljs-string">{"\"event was too slow\""}</_components.span>{");\n  "}<_components.span className="hljs-comment">{"// if event is quicker:"}</_components.span>{"\n  event; "}<_components.span className="hljs-comment">{"// => string"}</_components.span>{"\n} "}<_components.span className="hljs-keyword">{"catch"}</_components.span>{" (err) {\n  "}<_components.span className="hljs-comment">{"// if timeouts:"}</_components.span>{"\n  "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(err); "}<_components.span className="hljs-comment">{"// => \"event was too slow\""}</_components.span>{"\n}\n"}</_components.code></_components.pre>{"\n"}<_components.h3 id="once"><_components.a className="header-anchor" href="#once">{"#"}</_components.a><_components.code>{"once"}</_components.code></_components.h3>{"\n"}<_components.p>{"Listen to any EventBus/Emitter, but the listener will automatically unsubscribe on the first captured event. So the callback will run only "}<_components.strong>{"once"}</_components.strong>{"."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { once } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, emit } = createEmitter<"}<_components.span className="hljs-built_in">{"string"}</_components.span>{">();\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" unsub = "}<_components.span className="hljs-title function_">{"once"}</_components.span>{"(listen, "}<_components.span className="hljs-function"><_components.span className="hljs-params">{"event"}</_components.span>{" =>"}</_components.span>{" "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"(event));\n\n"}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"foo\""}</_components.span>{"); "}<_components.span className="hljs-comment">{"// will log \"foo\" and unsub"}</_components.span>{"\n\n"}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"("}<_components.span className="hljs-string">{"\"bar\""}</_components.span>{"); "}<_components.span className="hljs-comment">{"// won't log"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h3 id="toeffect"><_components.a className="header-anchor" href="#toeffect">{"#"}</_components.a><_components.code>{"toEffect"}</_components.code></_components.h3>{"\n"}<_components.p>{"Wraps "}<_components.code>{"emit"}</_components.code>{" calls inside a "}<_components.code>{"createEffect"}</_components.code>{". It causes that listeners execute having an reactive owner available. It allows for usage of effects, memos and other primitives inside listeners, without having to create a synthetic root."}</_components.p>{"\n"}<_components.pre><_components.code className="hljs language-ts"><_components.span className="hljs-keyword">{"import"}</_components.span>{" { toEffect } "}<_components.span className="hljs-keyword">{"from"}</_components.span>{" "}<_components.span className="hljs-string">{"\"@solid-primitives/event-bus\""}</_components.span>{";\n\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" { listen, emit } = "}<_components.span className="hljs-title function_">{"createEmitter"}</_components.span>{"();\n"}<_components.span className="hljs-keyword">{"const"}</_components.span>{" emitInEffect = "}<_components.span className="hljs-title function_">{"toEffect"}</_components.span>{"(emit);\n\n"}<_components.span className="hljs-comment">{"// owner is needed for creating computations like createEffect"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"listen"}</_components.span>{"("}<_components.span className="hljs-function">{"() =>"}</_components.span>{" "}<_components.span className="hljs-variable language_">{"console"}</_components.span>{"."}<_components.span className="hljs-title function_">{"log"}</_components.span>{"("}<_components.span className="hljs-title function_">{"getOwner"}</_components.span>{"()));\n\n"}<_components.span className="hljs-comment">{"// ...sometime later (after root initiation):"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"emit"}</_components.span>{"(); "}<_components.span className="hljs-comment">{"// listener will log `null`"}</_components.span>{"\n"}<_components.span className="hljs-title function_">{"emitInEffect"}</_components.span>{"(); "}<_components.span className="hljs-comment">{"// listener will log an owner object"}</_components.span>{"\n"}</_components.code></_components.pre>{"\n"}<_components.h2 id="demo"><_components.a className="header-anchor" href="#demo">{"#"}</_components.a>{"Demo"}</_components.h2>{"\n"}<_components.p><_components.a href="https://solidjs-community.github.io/solid-primitives/event-bus/">{"Live Site"}</_components.a></_components.p>{"\n"}<_components.p><_components.a href="https://codesandbox.io/s/solid-primitives-event-bus-6fp4h?file=/index.tsx">{"CodeSandbox"}</_components.a></_components.p>{"\n"}<_components.h2 id="changelog"><_components.a className="header-anchor" href="#changelog">{"#"}</_components.a>{"Changelog"}</_components.h2>{"\n"}<_components.p>{"See "}<_components.a href="./CHANGELOG.md">{"CHANGELOG.md"}</_components.a></_components.p></>;
}
function MDXContent(props = {}) {
  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);
  return MDXLayout ? <MDXLayout {...props}><_createMdxContent {...props} /></MDXLayout> : _createMdxContent(props);
}

function _missingMdxReference(id, component) {
  throw new Error("Expected " + (component ? "component" : "object") + " `" + id + "` to be defined: you likely forgot to import, pass, or provide it.");
}


export default function Index () {
  return (
    <PrimitivePageMain packageName="@solid-primitives/event-bus" name="event-bus" stage={2}>
      <MDXContent/>
    </PrimitivePageMain>
  )
}
